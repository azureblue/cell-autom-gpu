<html>
    <head>
        <title>cellular automata simulation</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes" />
        <link rel="shortcut icon" href="">
        <style>
            * {border: 0px; width: 100%; height: 100%; margin: 0px;}
            canvas {position: absolute; background: transparent;}
        </style>
        <script src="board.js"></script>
        <script src="mathutils.js"></script>
        <script src="geom.js"></script>
        <script src="color.js"></script>
        <script src="ca.js"></script>

        <script>
            function updateCanvasSize() {
                var canvas = document.getElementById("canvas");
                canvas.width = canvas.clientWidth;
                canvas.height = canvas.clientHeight;
            }
            
            function start() {
                updateCanvasSize();
                var frame = 0;
                var board = new Board(200, 200);
                board.iteratePositions((x, y) => board.set(x, y, randomBool() ? 1 : 0));
                var ca = new CA(document.getElementById("canvas"), 2048, 1024, 100);
                ca.updateSize();
                ca.putBoard(board, 0, 0);
                function resizeCallback() {
                    updateCanvasSize();
                    ca.updateSize();
                }
                window.addEventListener("resize", resizeCallback);
                function nextIteration() {
                    frame++;
                    if (frame % 2 === 0)
                        ca.iterateAndRender();
                    window.requestAnimationFrame(nextIteration);
                }
                nextIteration();
            }
            
            
        </script>
    </head>
    <body onload="start()">
        <canvas id="canvas"></canvas>
    </body>
</html>
